import requests
import ast
import time

cities = [{'lat':'-22.328474', 'long':'24.684866', 'uuid':'9774d56d682e549c'},
{'lat':'53.709807', 'long':'27.953389', 'uuid':'9774d56d682e549c'},
{'lat':'17.189877', 'long':'-88.49765', 'uuid':'9774d56d682e549c'},
{'lat':'56.130366', 'long':'-106.346771', 'uuid':'9774d56d682e549c'},
{'lat':'-12.164165', 'long':'96.870956', 'uuid':'9774d56d682e549c'},
{'lat':'-4.038333', 'long':'21.758664', 'uuid':'9774d56d682e549c'},
{'lat':'6.611111', 'long':'20.939444', 'uuid':'9774d56d682e549c'},
{'lat':'-0.228021', 'long':'15.827659', 'uuid':'9774d56d682e549c'},
{'lat':'46.818188', 'long':'8.227512', 'uuid':'9774d56d682e549c'},
{'lat':'7.539989', 'long':'-5.54708', 'uuid':'9774d56d682e549c'},
{'lat':'-21.236736', 'long':'-159.777671', 'uuid':'9774d56d682e549c'},
{'lat':'-35.675147', 'long':'-71.542969', 'uuid':'9774d56d682e549c'},
{'lat':'7.369722', 'long':'12.354722', 'uuid':'9774d56d682e549c'},
{'lat':'35.86166', 'long':'104.195397', 'uuid':'9774d56d682e549c'},
{'lat':'4.570868', 'long':'-74.297333', 'uuid':'9774d56d682e549c'},
{'lat':'9.748917', 'long':'-83.753428', 'uuid':'9774d56d682e549c'},
{'lat':'21.521757', 'long':'-77.781167', 'uuid':'9774d56d682e549c'},
{'lat':'16.002082', 'long':'-24.013197', 'uuid':'9774d56d682e549c'},
{'lat':'-10.447525', 'long':'105.690449', 'uuid':'9774d56d682e549c'},
{'lat':'35.126413', 'long':'33.429859', 'uuid':'9774d56d682e549c'},
{'lat':'49.817492', 'long':'15.472962', 'uuid':'9774d56d682e549c'},
{'lat':'51.165691', 'long':'10.451526', 'uuid':'9774d56d682e549c'},
{'lat':'11.825138', 'long':'42.590275', 'uuid':'9774d56d682e549c'},
{'lat':'56.26392', 'long':'9.501785', 'uuid':'9774d56d682e549c'},
{'lat':'15.414999', 'long':'-61.370976', 'uuid':'9774d56d682e549c'},
{'lat':'18.735693', 'long':'-70.162651', 'uuid':'9774d56d682e549c'},
{'lat':'28.033886', 'long':'1.659626', 'uuid':'9774d56d682e549c'},
{'lat':'-1.831239', 'long':'-78.183406', 'uuid':'9774d56d682e549c'},
{'lat':'58.595272', 'long':'25.013607', 'uuid':'9774d56d682e549c'},
{'lat':'26.820553', 'long':'30.802498', 'uuid':'9774d56d682e549c'},
{'lat':'24.215527', 'long':'-12.885834', 'uuid':'9774d56d682e549c'},
{'lat':'15.179384', 'long':'39.782334', 'uuid':'9774d56d682e549c'},
{'lat':'40.463667', 'long':'-3.74922', 'uuid':'9774d56d682e549c'},
{'lat':'9.145', 'long':'40.489673', 'uuid':'9774d56d682e549c'},
{'lat':'61.92411', 'long':'25.748151', 'uuid':'9774d56d682e549c'},
{'lat':'-16.578193', 'long':'179.414413', 'uuid':'9774d56d682e549c'},
{'lat':'-51.796253', 'long':'-59.523613', 'uuid':'9774d56d682e549c'},
{'lat':'7.425554', 'long':'150.550812', 'uuid':'9774d56d682e549c'},
{'lat':'61.892635', 'long':'-6.911806', 'uuid':'9774d56d682e549c'},
{'lat':'46.227638', 'long':'2.213749', 'uuid':'9774d56d682e549c'},
{'lat':'-0.803689', 'long':'11.609444', 'uuid':'9774d56d682e549c'},
{'lat':'55.378051', 'long':'-3.435973', 'uuid':'9774d56d682e549c'},
{'lat':'12.262776', 'long':'-61.604171', 'uuid':'9774d56d682e549c'},
{'lat':'42.315407', 'long':'43.356892', 'uuid':'9774d56d682e549c'},
{'lat':'3.933889', 'long':'-53.125782', 'uuid':'9774d56d682e549c'},
{'lat':'49.465691', 'long':'-2.585278', 'uuid':'9774d56d682e549c'},
{'lat':'7.946527', 'long':'-1.023194', 'uuid':'9774d56d682e549c'},
{'lat':'36.137741', 'long':'-5.345374', 'uuid':'9774d56d682e549c'},
{'lat':'71.706936', 'long':'-42.604303', 'uuid':'9774d56d682e549c'},
{'lat':'13.443182', 'long':'-15.310139', 'uuid':'9774d56d682e549c'},
{'lat':'9.945587', 'long':'-9.696645', 'uuid':'9774d56d682e549c'},
{'lat':'16.995971', 'long':'-62.067641', 'uuid':'9774d56d682e549c'},
{'lat':'1.650801', 'long':'10.267895', 'uuid':'9774d56d682e549c'},
{'lat':'39.074208', 'long':'21.824312', 'uuid':'9774d56d682e549c'},
{'lat':'-54.429579', 'long':'-36.587909', 'uuid':'9774d56d682e549c'},
{'lat':'15.783471', 'long':'-90.230759', 'uuid':'9774d56d682e549c'},
{'lat':'13.444304', 'long':'144.793731', 'uuid':'9774d56d682e549c'},
{'lat':'11.803749', 'long':'-15.180413', 'uuid':'9774d56d682e549c'},
{'lat':'4.860416', 'long':'-58.93018', 'uuid':'9774d56d682e549c'},
{'lat':'31.354676', 'long':'34.308825', 'uuid':'9774d56d682e549c'},
{'lat':'22.396428', 'long':'114.109497', 'uuid':'9774d56d682e549c'},
{'lat':'-53.08181', 'long':'73.504158', 'uuid':'9774d56d682e549c'},
{'lat':'15.199999', 'long':'-86.241905', 'uuid':'9774d56d682e549c'},
{'lat':'45.1', 'long':'15.2', 'uuid':'9774d56d682e549c'},
{'lat':'18.971187', 'long':'-72.285215', 'uuid':'9774d56d682e549c'},
{'lat':'47.162494', 'long':'19.503304', 'uuid':'9774d56d682e549c'},
{'lat':'-0.789275', 'long':'113.921327', 'uuid':'9774d56d682e549c'},
{'lat':'53.41291', 'long':'-8.24389', 'uuid':'9774d56d682e549c'},
{'lat':'31.046051', 'long':'34.851612', 'uuid':'9774d56d682e549c'},
{'lat':'54.236107', 'long':'-4.548056', 'uuid':'9774d56d682e549c'},
{'lat':'20.593684', 'long':'78.96288', 'uuid':'9774d56d682e549c'},
{'lat':'-6.343194', 'long':'71.876519', 'uuid':'9774d56d682e549c'},
{'lat':'33.223191', 'long':'43.679291', 'uuid':'9774d56d682e549c'},
{'lat':'32.427908', 'long':'53.688046', 'uuid':'9774d56d682e549c'},
{'lat':'64.963051', 'long':'-19.020835', 'uuid':'9774d56d682e549c'},
{'lat':'41.87194', 'long':'12.56738', 'uuid':'9774d56d682e549c'},
{'lat':'49.214439', 'long':'-2.13125', 'uuid':'9774d56d682e549c'},
{'lat':'18.109581', 'long':'-77.297508', 'uuid':'9774d56d682e549c'},
{'lat':'30.585164', 'long':'36.238414', 'uuid':'9774d56d682e549c'},
{'lat':'36.204824', 'long':'138.252924', 'uuid':'9774d56d682e549c'},
{'lat':'-0.023559', 'long':'37.906193', 'uuid':'9774d56d682e549c'},
{'lat':'41.20438', 'long':'74.766098', 'uuid':'9774d56d682e549c'},
{'lat':'12.565679', 'long':'104.990963', 'uuid':'9774d56d682e549c'},
{'lat':'-3.370417', 'long':'-168.734039', 'uuid':'9774d56d682e549c'},
{'lat':'-11.875001', 'long':'43.872219', 'uuid':'9774d56d682e549c'},
{'lat':'17.357822', 'long':'-62.782998', 'uuid':'9774d56d682e549c'},
{'lat':'40.339852', 'long':'127.510093', 'uuid':'9774d56d682e549c'},
{'lat':'35.907757', 'long':'127.766922', 'uuid':'9774d56d682e549c'},
{'lat':'29.31166', 'long':'47.481766', 'uuid':'9774d56d682e549c'},
{'lat':'19.513469', 'long':'-80.566956', 'uuid':'9774d56d682e549c'},
{'lat':'48.019573', 'long':'66.923684', 'uuid':'9774d56d682e549c'},
{'lat':'19.85627', 'long':'102.495496', 'uuid':'9774d56d682e549c'},
{'lat':'33.854721', 'long':'35.862285', 'uuid':'9774d56d682e549c'},
{'lat':'13.909444', 'long':'-60.978893', 'uuid':'9774d56d682e549c'},
{'lat':'47.166', 'long':'9.555373', 'uuid':'9774d56d682e549c'},
{'lat':'7.873054', 'long':'80.771797', 'uuid':'9774d56d682e549c'},
{'lat':'6.428055', 'long':'-9.429499', 'uuid':'9774d56d682e549c'},
{'lat':'-29.609988', 'long':'28.233608', 'uuid':'9774d56d682e549c'},
{'lat':'55.169438', 'long':'23.881275', 'uuid':'9774d56d682e549c'},
{'lat':'49.815273', 'long':'6.129583', 'uuid':'9774d56d682e549c'},
{'lat':'56.879635', 'long':'24.603189', 'uuid':'9774d56d682e549c'},
{'lat':'26.3351', 'long':'17.228331', 'uuid':'9774d56d682e549c'},
{'lat':'31.791702', 'long':'-7.09262', 'uuid':'9774d56d682e549c'},
{'lat':'43.750298', 'long':'7.412841', 'uuid':'9774d56d682e549c'},
{'lat':'47.411631', 'long':'28.369885', 'uuid':'9774d56d682e549c'},
{'lat':'42.708678', 'long':'19.37439', 'uuid':'9774d56d682e549c'},
{'lat':'-18.766947', 'long':'46.869107', 'uuid':'9774d56d682e549c'},
{'lat':'7.131474', 'long':'171.184478', 'uuid':'9774d56d682e549c'},
{'lat':'41.608635', 'long':'21.745275', 'uuid':'9774d56d682e549c'},
{'lat':'17.570692', 'long':'-3.996166', 'uuid':'9774d56d682e549c'},
{'lat':'21.913965', 'long':'95.956223', 'uuid':'9774d56d682e549c'},
{'lat':'46.862496', 'long':'103.846656', 'uuid':'9774d56d682e549c'},
{'lat':'22.198745', 'long':'113.543873', 'uuid':'9774d56d682e549c'},
{'lat':'17.33083', 'long':'145.38469', 'uuid':'9774d56d682e549c'},
{'lat':'14.641528', 'long':'-61.024174', 'uuid':'9774d56d682e549c'},
{'lat':'21.00789', 'long':'-10.940835', 'uuid':'9774d56d682e549c'},
{'lat':'16.742498', 'long':'-62.187366', 'uuid':'9774d56d682e549c'},
{'lat':'35.937496', 'long':'14.375416', 'uuid':'9774d56d682e549c'},
{'lat':'-20.348404', 'long':'57.552152', 'uuid':'9774d56d682e549c'},
{'lat':'3.202778', 'long':'73.22068', 'uuid':'9774d56d682e549c'},
{'lat':'-13.254308', 'long':'34.301525', 'uuid':'9774d56d682e549c'},
{'lat':'23.634501', 'long':'-102.552784', 'uuid':'9774d56d682e549c'},
{'lat':'4.210484', 'long':'101.975766', 'uuid':'9774d56d682e549c'},
{'lat':'-18.665695', 'long':'35.529562', 'uuid':'9774d56d682e549c'},
{'lat':'-22.95764', 'long':'18.49041', 'uuid':'9774d56d682e549c'},
{'lat':'-20.904305', 'long':'165.618042', 'uuid':'9774d56d682e549c'},
{'lat':'17.607789', 'long':'8.081666', 'uuid':'9774d56d682e549c'},
{'lat':'-29.040835', 'long':'167.954712', 'uuid':'9774d56d682e549c'},
{'lat':'9.081999', 'long':'8.675277', 'uuid':'9774d56d682e549c'},
{'lat':'12.865416', 'long':'-85.207229', 'uuid':'9774d56d682e549c'},
{'lat':'52.132633', 'long':'5.291266', 'uuid':'9774d56d682e549c'},
{'lat':'60.472024', 'long':'8.468946', 'uuid':'9774d56d682e549c'},
{'lat':'28.394857', 'long':'84.124008', 'uuid':'9774d56d682e549c'},
{'lat':'-0.522778', 'long':'166.931503', 'uuid':'9774d56d682e549c'},
{'lat':'-19.054445', 'long':'-169.867233', 'uuid':'9774d56d682e549c'},
{'lat':'-40.900557', 'long':'174.885971', 'uuid':'9774d56d682e549c'},
{'lat':'21.512583', 'long':'55.923255', 'uuid':'9774d56d682e549c'},
{'lat':'8.537981', 'long':'-80.782127', 'uuid':'9774d56d682e549c'},
{'lat':'-9.189967', 'long':'-75.015152', 'uuid':'9774d56d682e549c'},
{'lat':'-17.679742', 'long':'-149.406843', 'uuid':'9774d56d682e549c'},
{'lat':'-6.314993', 'long':'143.95555', 'uuid':'9774d56d682e549c'},
{'lat':'12.879721', 'long':'121.774017', 'uuid':'9774d56d682e549c'},
{'lat':'30.375321', 'long':'69.345116', 'uuid':'9774d56d682e549c'},
{'lat':'51.919438', 'long':'19.145136', 'uuid':'9774d56d682e549c'},
{'lat':'46.941936', 'long':'-56.27111', 'uuid':'9774d56d682e549c'},
{'lat':'-24.703615', 'long':'-127.439308', 'uuid':'9774d56d682e549c'},
{'lat':'18.220833', 'long':'-66.590149', 'uuid':'9774d56d682e549c'},
{'lat':'31.952162', 'long':'35.233154', 'uuid':'9774d56d682e549c'},
{'lat':'39.399872', 'long':'-8.224454', 'uuid':'9774d56d682e549c'},
{'lat':'7.51498', 'long':'134.58252', 'uuid':'9774d56d682e549c'},
{'lat':'-23.442503', 'long':'-58.443832', 'uuid':'9774d56d682e549c'},
{'lat':'25.354826', 'long':'51.183884', 'uuid':'9774d56d682e549c'},
{'lat':'-21.115141', 'long':'55.536384', 'uuid':'9774d56d682e549c'},
{'lat':'45.943161', 'long':'24.96676', 'uuid':'9774d56d682e549c'},
{'lat':'44.016521', 'long':'21.005859', 'uuid':'9774d56d682e549c'},
{'lat':'61.52401', 'long':'105.318756', 'uuid':'9774d56d682e549c'},
{'lat':'-1.940278', 'long':'29.873888', 'uuid':'9774d56d682e549c'},
{'lat':'23.885942', 'long':'45.079162', 'uuid':'9774d56d682e549c'},
{'lat':'-9.64571', 'long':'160.156194', 'uuid':'9774d56d682e549c'},
{'lat':'-4.679574', 'long':'55.491977', 'uuid':'9774d56d682e549c'},
{'lat':'12.862807', 'long':'30.217636', 'uuid':'9774d56d682e549c'},
{'lat':'60.128161', 'long':'18.643501', 'uuid':'9774d56d682e549c'},
{'lat':'1.352083', 'long':'103.819836', 'uuid':'9774d56d682e549c'},
{'lat':'-24.143474', 'long':'-10.030696', 'uuid':'9774d56d682e549c'},
{'lat':'46.151241', 'long':'14.995463', 'uuid':'9774d56d682e549c'},
{'lat':'77.553604', 'long':'23.670272', 'uuid':'9774d56d682e549c'},
{'lat':'48.669026', 'long':'19.699024', 'uuid':'9774d56d682e549c'},
{'lat':'8.460555', 'long':'-11.779889', 'uuid':'9774d56d682e549c'},
{'lat':'43.94236', 'long':'12.457777', 'uuid':'9774d56d682e549c'},
{'lat':'14.497401', 'long':'-14.452362', 'uuid':'9774d56d682e549c'},
{'lat':'5.152149', 'long':'46.199616', 'uuid':'9774d56d682e549c'},
{'lat':'3.919305', 'long':'-56.027783', 'uuid':'9774d56d682e549c'},
{'lat':'0.18636', 'long':'6.613081', 'uuid':'9774d56d682e549c'},
{'lat':'13.794185', 'long':'-88.89653', 'uuid':'9774d56d682e549c'},
{'lat':'34.802075', 'long':'38.996815', 'uuid':'9774d56d682e549c'},
{'lat':'-26.522503', 'long':'31.465866', 'uuid':'9774d56d682e549c'},
{'lat':'21.694025', 'long':'-71.797928', 'uuid':'9774d56d682e549c'},
{'lat':'15.454166', 'long':'18.732207', 'uuid':'9774d56d682e549c'},
{'lat':'-49.280366', 'long':'69.348557', 'uuid':'9774d56d682e549c'},
{'lat':'8.619543', 'long':'0.824782', 'uuid':'9774d56d682e549c'},
{'lat':'15.870032', 'long':'100.992541', 'uuid':'9774d56d682e549c'},
{'lat':'38.861034', 'long':'71.276093', 'uuid':'9774d56d682e549c'},
{'lat':'-8.967363', 'long':'-171.855881', 'uuid':'9774d56d682e549c'},
{'lat':'-8.874217', 'long':'125.727539', 'uuid':'9774d56d682e549c'},
{'lat':'38.969719', 'long':'59.556278', 'uuid':'9774d56d682e549c'},
{'lat':'33.886917', 'long':'9.537499', 'uuid':'9774d56d682e549c'},
{'lat':'-21.178986', 'long':'-175.198242', 'uuid':'9774d56d682e549c'},
{'lat':'38.963745', 'long':'35.243322', 'uuid':'9774d56d682e549c'},
{'lat':'10.691803', 'long':'-61.222503', 'uuid':'9774d56d682e549c'},
{'lat':'-7.109535', 'long':'177.64933', 'uuid':'9774d56d682e549c'},
{'lat':'23.69781', 'long':'120.960515', 'uuid':'9774d56d682e549c'},
{'lat':'-6.369028', 'long':'34.888822', 'uuid':'9774d56d682e549c'},
{'lat':'48.379433', 'long':'31.16558', 'uuid':'9774d56d682e549c'},
{'lat':'1.373333', 'long':'32.290275', 'uuid':'9774d56d682e549c'},
{'lat':'37.09024', 'long':'-95.712891', 'uuid':'9774d56d682e549c'},
{'lat':'-32.522779', 'long':'-55.765835', 'uuid':'9774d56d682e549c'},
{'lat':'41.377491', 'long':'64.585262', 'uuid':'9774d56d682e549c'},
{'lat':'41.902916', 'long':'12.453389', 'uuid':'9774d56d682e549c'},
{'lat':'12.984305', 'long':'-61.287228', 'uuid':'9774d56d682e549c'},
{'lat':'6.42375', 'long':'-66.58973', 'uuid':'9774d56d682e549c'},
{'lat':'18.420695', 'long':'-64.639968', 'uuid':'9774d56d682e549c'},
{'lat':'18.335765', 'long':'-64.896335', 'uuid':'9774d56d682e549c'},
{'lat':'14.058324', 'long':'108.277199', 'uuid':'9774d56d682e549c'},
{'lat':'-15.376706', 'long':'166.959158', 'uuid':'9774d56d682e549c'},
{'lat':'-13.768752', 'long':'-177.156097', 'uuid':'9774d56d682e549c'},
{'lat':'-13.759029', 'long':'-172.104629', 'uuid':'9774d56d682e549c'},
{'lat':'42.602636', 'long':'20.902977', 'uuid':'9774d56d682e549c'},
{'lat':'15.552727', 'long':'48.516388', 'uuid':'9774d56d682e549c'},
{'lat':'-12.8275', 'long':'45.166244', 'uuid':'9774d56d682e549c'},
{'lat':'-30.559482', 'long':'22.937506', 'uuid':'9774d56d682e549c'},
{'lat':'-13.133897', 'long':'27.849332', 'uuid':'9774d56d682e549c'},
{'lat':'-19.015438', 'long':'29.154857', 'uuid':'9774d56d682e549c'}]
uuid = {'uuid':'9774d56d682e549c'}
def getmangos():

    r = requests.post('http://pokeamango.vuln.icec.tf/mango/count', data = uuid)
    time.sleep(1)
    print('Mango count: ' + r.text)
    for i in cities:
        r = requests.post('http://pokeamango.vuln.icec.tf/mango/list', data = i)
        time.sleep(1)
        while '500 Internal Server Error' in r.text:
            r = requests.post('http://pokeamango.vuln.icec.tf/mango/list', data = i)
            time.sleep(1)
            print(r.text)
        dict = r.text
        head, sep, tail = dict.partition(',"token"')
        head, sep, head = head.partition('"mangos":')
        head = ast.literal_eval("{0}".format(head))
        print('moving on')
        for i in head:
            if len(i) != 0:
                dict2 = {}
                dict2['curLat'] = i.get('lat', 'asd')
                dict2['curLong'] = i.get('lng', 'asd')
                dict2['mangoLat'] = i.get('lat', 'asd')
                dict2['mangoLong'] = i.get('lng', 'asd')
                dict2['uuid'] = '9774d56d682e549c'
                r = requests.post('http://pokeamango.vuln.icec.tf/mango/catch', data = dict2)
                print("trying; " + str(dict2))
                if '500 Internal Server Error' in r.text:
                    while '500 Internal Server Error' in r.text:
                        r = requests.post('http://pokeamango.vuln.icec.tf/mango/catch', data = dict2)
                        time.sleep(1)
                time.sleep(1)
                if '400 Bad Request' in r.text:
                    print('bad request')
                    print(i)
                else:
                    print(r.text)


getmangos()
